// JavaScript Document
function trace(){try{if(window&&window.console&&window.console.log){var e="";for(var t=0;t<arguments.length;t++){e+=arguments[t]+(t==arguments.length-1?"":", ")}window.console.log(e)}}catch(n){window.console={};console.log=function(e){};console.log(n)}}function dump(e){var t="";for(var n in e){t+=n+": "+e[n]+(arguments[1]?"<br>":"\n")}return t}puremvc.define({name:"view.components.TagComponent",constructor:function(e){if(e){this.element=e;this.id=this.element.id}this.listenerMap=new Array}},{listenerMap:null,element:null,id:null,addEventListener:function(e,t){if(!this.listenerMap[e]){this.listenerMap[e]=new Array}for(var n=0;n<this.listenerMap[e].length;n++){if(this.listenerMap[e][n]==t){return}}this.listenerMap[e].push(t)},removeEventListener:function(e,t){if(!this.listenerMap[e]){return}for(var n=0;n<this.listenerMap[e].length;n++){if(this.listenerMap[e][n]==t){this.listenerMap[e].splice(n,1)}}},dispatchEvent:function(e){if(typeof e=="undefined"||typeof e.type=="undefined"){return}if(!this.listenerMap[e.type]){return}for(var t=0;t<this.listenerMap[e.type].length;t++){var n=this.listenerMap[e.type][t];if(typeof e.target=="undefined"){e.target=this}if(typeof n=="function"){n.call(this,e)}else if(typeof n.handleEvent!="undefined"){n.handleEvent.call(n,e)}}},addEventHandler:function(e,t,n,r){if(e.addEventListener){t=t.replace("on","");e.addEventListener(t,n,r==true?true:false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}},append:function(e){this.element.appendChild(e)},prepend:function(e){this.element.insertBefore(e)}});puremvc.define({name:"CSS"},{},{hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},removeClass:function(e,t){if(CSS.hasClass(e,t)){e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)"),"")}},addClass:function(e,t){if(!CSS.hasClass(e,t)){e.className+=e.className?" "+t:t}},toggleClass:function(e,t){if(CSS.hasClass(e,t)){CSS.removeClass(e,t)}else{CSS.addClass(e,t)}},hide:function(e){CSS.addClass(e,"hidden")},show:function(e){CSS.removeClass(e,"hidden")},getStyle:function(e,t){if(!document.getElementById)return null;var n=e.style[CSS.toCamelCase(t)];if(!n){if(document.defaultView){n=document.defaultView.getComputedStyle(e,"").getPropertyValue(t)}else if(e.currentStyle){n=e.currentStyle[CSS.toCamelCase(t)]}}return n},toCamelCase:function(e){var t=e.split("-");if(t.length==1)return t[0];var n=e.indexOf("-")==0?t[0].charAt(0).toUpperCase()+t[0].substring(1):t[0];for(var r=1,i=t.length;r<i;r++){var s=t[r];n+=s.charAt(0).toUpperCase()+s.substring(1)}return n},getOffset:function(e){var t=0;var n=0;while(e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop)){t+=e.offsetLeft-e.scrollLeft;n+=e.offsetTop-e.scrollTop;e=e.offsetParent}return{top:n,left:t}},setAlpha:function(e,t){e.style.filter="alpha(opacity="+t+")";e.style.opacity=t}});puremvc.define({name:"view.components.Event",constructor:function(e,t,n){this.type=e;this.target=t;this.body=n}},{type:null,target:null,body:null},{adapt:function(e){if(e.srcElement){e.target=e.srcElement;if(e.clientX||e.clientY){e.pageX=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;e.pageY=e.clientY+document.body.scrollTop+document.documentElement.scrollTop}}if(e.target.nodeType&&e.target.nodeType==3){e.target=e.target.parentNode}}});puremvc.define({name:"Delegate"},{},{create:function(e,t){var n=new Array;for(var r=2;r<arguments.length;r++){n.push(arguments[r])}return function(){var r=new Array;for(var i=0;i<arguments.length;i++){r.push(arguments[i])}return t.apply(e,r.concat(n))}}});puremvc.define({name:"events"},{},{MouseEvent:{CLICK:"click",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove"},KeyboardEvent:{KEY_DOWN:"keydown",KEY_UP:"keyup",KEY_PRESS:"keypress"},TouchEvent:{TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel"},Window:{RESIZE:"resize"}});Function.prototype.later=function(e){var t=this;var n=function(){var r=n.arguments;var i=this;var s=function(){t.apply(i,r)};setTimeout(s,e)};return n}
puremvc.define({name:"ApplicationFacade",parent:puremvc.Facade},{startup:function(){if(!this.initialized){this.initialized=true;this.registerCommand(ApplicationFacade.STARTUP,controller.commands.StartupCommand);this.sendNotification(ApplicationFacade.STARTUP)}}},{getInstance:function(e){var t=puremvc.Facade.instanceMap;instance=t[e];if(instance){return instance}return t[e]=new ApplicationFacade(e)},STARTUP:"startup",SCROLL:"scroll"})
puremvc.define({name:"controller.commands.StartupCommand",parent:puremvc.SimpleCommand},{execute:function(e){this.facade.registerMediator(new view.mediators.ScrollerMediator(new view.components.Scroller("scroller")));this.facade.registerMediator(new view.mediators.MenuMediator(new view.components.Menu("menu")))}})
puremvc.define({name:"view.mediators.ScrollerMediator",parent:puremvc.Mediator,constructor:function(e){puremvc.Mediator.call(this,this.constructor.NAME,e)}},{onRegister:function(){},listNotificationInterests:function(){return[ApplicationFacade.SCROLL]},handleNotification:function(e){switch(e.getName()){case ApplicationFacade.SCROLL:if(this.facade.multitonKey=="google_enhanced"){this.viewComponent.scroll(e.getBody(),true)}else{this.viewComponent.scroll(e.getBody(),false)}break}}},{NAME:"ScrollerMediator"})
puremvc.define({name:"view.components.Scroller",parent:view.components.TagComponent,constructor:function(e){view.components.TagComponent.call(this,document.getElementById(e));this.imageWidth=document.getElementById("product").width}},{imageWidth:null,scroll:function(e,t){if(!t){this.element.style.marginLeft=-e*this.imageWidth+"px"}else{TweenLite.to(this.element,.5,{css:{x:-e*this.imageWidth}})}}},{})
puremvc.define({name:"view.mediators.MenuMediator",parent:puremvc.Mediator,constructor:function(e){puremvc.Mediator.call(this,this.constructor.NAME,e)}},{onRegister:function(){this.viewComponent.addEventListener(view.components.Menu.SCROLL,Delegate.create(this,this.scrollHandler))},scrollHandler:function(e){this.facade.sendNotification(ApplicationFacade.SCROLL,e.body)}},{NAME:"MenuMediator"})
puremvc.define({name:"view.components.Menu",parent:view.components.TagComponent,constructor:function(e){view.components.TagComponent.call(this,document.getElementById(e));for(var t=0;t<this.total;t++){this.buttons.push(document.getElementById("menu_"+t));this.spans.push(document.getElementById("span_"+t));this.addEventHandler(this.buttons[t],events.MouseEvent.CLICK,Delegate.create(this,this.buttons_clickHandler))}this.left=document.getElementById("left");this.right=document.getElementById("right");this.addEventHandler(this.left,events.MouseEvent.CLICK,Delegate.create(this,this.left_clickHandler));this.addEventHandler(this.right,events.MouseEvent.CLICK,Delegate.create(this,this.right_clickHandler));this.setBackgroundPosition(0);this.intervalID=setInterval(Delegate.create(this,this.intervalHandler),2500)}},{buttons:[],spans:[],total:11,left:null,right:null,currentIndex:0,intervalID:0,buttons_clickHandler:function(e){view.components.Event.adapt(e);var t=parseInt(e.target.id.split("_")[1]);clearInterval(this.intervalID);if(t!=this.currentIndex){this.currentIndex=t;this.setBackgroundPosition(t);this.dispatchEvent(new view.components.Event(this.constructor.SCROLL,e.target,t))}},left_clickHandler:function(e){view.components.Event.adapt(e);clearInterval(this.intervalID);this.currentIndex--;if(this.currentIndex<0){this.currentIndex=this.total-1}this.setBackgroundPosition(this.currentIndex);this.dispatchEvent(new view.components.Event(this.constructor.SCROLL,e.target,this.currentIndex))},right_clickHandler:function(e){view.components.Event.adapt(e);clearInterval(this.intervalID);this.currentIndex++;if(this.currentIndex>this.total-1){this.currentIndex=0}this.setBackgroundPosition(this.currentIndex);this.dispatchEvent(new view.components.Event(this.constructor.SCROLL,e.target,this.currentIndex))},setBackgroundPosition:function(e){this.reset();this.spans[e].style.backgroundPosition="0px "+ -((e+1)*18)+"px"},intervalHandler:function(){this.currentIndex++;if(this.currentIndex>=this.total){this.currentIndex=0;clearInterval(this.intervalID)}this.setBackgroundPosition(this.currentIndex);this.dispatchEvent(new view.components.Event(this.constructor.SCROLL,null,this.currentIndex))},reset:function(){for(var e=0,t=this.spans.length;e<t;e++){this.spans[e].style.backgroundPosition="0px 0px"}}},{SCROLL:"scroll"})
